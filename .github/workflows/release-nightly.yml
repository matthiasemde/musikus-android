name: RELEASE-NIGHTLY

on:
  workflow_dispatch:
  schedule:
    - cron: '0 4 * * 2-7'
env:
  JAVA_VERSION: 17
  RELEASE_BOT_SIGNING_KEY_PATH: ${{ github.workspace }}/signing_key
  RELEASE_BOT_SIGNING_PUBLIC_KEY_PATH: ${{ github.workspace }}/signing_key.pub
  SIGNING_KEY_STORE_PATH: ${{ github.workspace }}/keystore.jks
jobs:
  prepare-release:
    name: Prepare nightly release
    runs-on: ubuntu-latest
    outputs:
      output: ${{ steps.set-output.outputs.output }}

    steps:
      - name: Set output
        id: set-output
        run: echo "output=nightly" >> $GITHUB_OUTPUT

  release:
    name: Release nightly
    needs: prepare-release
    if: ${{ needs.prepare-release.outputs.output != 'nightly' }}
    runs-on: ubuntu-latest

    steps:
      - name: Hello world
        run: echo "Hello world"
